"use client";

import React, { useState, useRef, useEffect } from "react";
import { IoMdArrowDropdown } from "react-icons/io";

const LanguangeSwitch = () => {
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);
  const dropdownRef = useRef<HTMLDivElement>(null);
  const [lang, setLang] = useState("English");

  const toggleDropdown = () => {
    setIsDropdownOpen(!isDropdownOpen);
  };

  useEffect(() => {
    const handleClickOutside = (event: any) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setIsDropdownOpen(false);
      }
    };

    document.addEventListener("mousedown", handleClickOutside);
    return () => {
      document.removeEventListener("mousedown", handleClickOutside);
    };
  }, []);

  return (
    <div className="relative inline-block" ref={dropdownRef}>
      <div
        onClick={toggleDropdown}
        className="group flex cursor-pointer items-center gap-1 xs:gap-2"
      >
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16 3C13.4288 3 10.9154 3.76244 8.77759 5.1909C6.63975 6.61935 4.97351 8.64968 3.98957 11.0251C3.00563 13.4006 2.74819 16.0144 3.2498 18.5362C3.75141 21.0579 4.98953 23.3743 6.80762 25.1924C8.6257 27.0105 10.9421 28.2486 13.4638 28.7502C15.9856 29.2518 18.5995 28.9944 20.9749 28.0104C23.3503 27.0265 25.3807 25.3603 26.8091 23.2224C28.2376 21.0846 29 18.5712 29 16C28.9964 12.5533 27.6256 9.24882 25.1884 6.81163C22.7512 4.37445 19.4467 3.00364 16 3ZM12.7038 21H19.2963C18.625 23.2925 17.5 25.3587 16 26.9862C14.5 25.3587 13.375 23.2925 12.7038 21ZM12.25 19C11.9183 17.0138 11.9183 14.9862 12.25 13H19.75C20.0817 14.9862 20.0817 17.0138 19.75 19H12.25ZM5.00001 16C4.99914 14.9855 5.13923 13.9759 5.41626 13H10.2238C9.92542 14.9889 9.92542 17.0111 10.2238 19H5.41626C5.13923 18.0241 4.99914 17.0145 5.00001 16ZM19.2963 11H12.7038C13.375 8.7075 14.5 6.64125 16 5.01375C17.5 6.64125 18.625 8.7075 19.2963 11ZM21.7763 13H26.5838C27.1388 14.9615 27.1388 17.0385 26.5838 19H21.7763C22.0746 17.0111 22.0746 14.9889 21.7763 13ZM25.7963 11H21.3675C20.8572 8.99189 20.0001 7.0883 18.835 5.375C20.3236 5.77503 21.7119 6.48215 22.9108 7.45091C24.1097 8.41967 25.0926 9.62861 25.7963 11ZM13.165 5.375C11.9999 7.0883 11.1428 8.99189 10.6325 11H6.20376C6.90741 9.62861 7.89029 8.41967 9.08918 7.45091C10.2881 6.48215 11.6764 5.77503 13.165 5.375ZM6.20376 21H10.6325C11.1428 23.0081 11.9999 24.9117 13.165 26.625C11.6764 26.225 10.2881 25.5178 9.08918 24.5491C7.89029 23.5803 6.90741 22.3714 6.20376 21ZM18.835 26.625C20.0001 24.9117 20.8572 23.0081 21.3675 21H25.7963C25.0926 22.3714 24.1097 23.5803 22.9108 24.5491C21.7119 25.5178 20.3236 26.225 18.835 26.625Z"
            fill="#1C1C1C"
          />
        </svg>
      </div>
      {isDropdownOpen && (
        <div className="absolute right-0 z-50 mt-2 w-36 rounded-md bg-container py-2 text-[9px] shadow-xl xs:w-48 xs:text-xs sm:text-[0.8rem]">
          <div className="mx-4 border-t border-border"></div>
          <button className="mx-2 block flex w-44 rounded-md px-2 py-2 hover:bg-secondary">
            <svg
              className="mr-2 size-3 sm:size-4"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M9.19095 12.5015C9.65086 12.4841 10.0378 12.8429 10.0551 13.3028C10.0943 14.3396 10.1492 15.0964 10.2033 15.6389C10.2565 16.1732 10.5791 16.4947 11.0287 16.5497C11.559 16.6145 12.3069 16.6676 13.3333 16.6676C14.3597 16.6676 15.1076 16.6145 15.6378 16.5497C16.0873 16.4948 16.41 16.1731 16.4632 15.6387C16.5636 14.6316 16.6666 12.8916 16.6666 10.0009C16.6666 7.11021 16.5636 5.37024 16.4632 4.36312C16.41 3.82867 16.0873 3.50703 15.6378 3.45209C15.1076 3.38728 14.3597 3.33423 13.3333 3.33423C12.3069 3.33423 11.5589 3.38727 11.0287 3.45208C10.5791 3.50705 10.2565 3.82854 10.2033 4.36287C10.1492 4.90544 10.0943 5.66218 10.0551 6.699C10.0378 7.15891 9.65086 7.51766 9.19095 7.5003C8.73104 7.48294 8.37228 7.09603 8.38964 6.63612C8.42982 5.57193 8.48678 4.78042 8.54483 4.19766C8.66688 2.97252 9.52105 1.95731 10.8265 1.79773C11.4342 1.72345 12.2506 1.66756 13.3333 1.66756C14.416 1.66756 15.2324 1.72345 15.8401 1.79774C17.1457 1.95734 17.9997 2.97302 18.1217 4.19792C18.2291 5.27646 18.3333 7.07462 18.3333 10.0009C18.3333 12.9272 18.2291 14.7253 18.1217 15.8039C17.9997 17.0288 17.1457 18.0444 15.8401 18.204C15.2324 18.2783 14.416 18.3342 13.3333 18.3342C12.2506 18.3342 11.4342 18.2783 10.8265 18.2041C9.52105 18.0445 8.66688 17.0293 8.54483 15.8041C8.48678 15.2214 8.42982 14.4299 8.38964 13.3657C8.37228 12.9057 8.73104 12.5188 9.19095 12.5015Z"
                fill="#7C878E"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M6.00588 12.3284C6.33132 12.6538 6.33132 13.1815 6.00588 13.5069C5.68044 13.8323 5.15281 13.8323 4.82737 13.5069L1.9107 10.5902C1.58527 10.2648 1.58527 9.73716 1.9107 9.41172L4.82737 6.49505C5.15281 6.16962 5.68044 6.16962 6.00588 6.49505C6.33132 6.82049 6.33132 7.34813 6.00588 7.67357L4.5118 9.16764H12.5C12.9602 9.16764 13.3333 9.54074 13.3333 10.001C13.3333 10.4612 12.9602 10.8343 12.5 10.8343L4.5118 10.8343L6.00588 12.3284Z"
                fill="#7C878E"
              />
            </svg>
            English
          </button>
        </div>
      )}
    </div>
  );
};

export default LanguangeSwitch;
